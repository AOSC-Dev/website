---
categories:
  - advisories
title: "小熊猫包管理 (oma) v1.18 正式发布"
date: 2025-06-18T16:00:00+08:00
important: true
home: true
---

![不就是小熊猫上树吗，你瞅啥？](/assets/news/oma-1.18.webp)
> 不就是小熊猫上树吗，你瞅啥？

小熊猫包管理 (oma) v1.18 来啦！本版更新，我们引入了用于依赖树分析的`tree` 及 `why` 命令、增强了软件包信息查阅功能，还对现有界面操作逻辑进行优化并修复了数个细节问题。

让我们来一起详细了解本版 oma 的新特性和修复吧～

安装指南
---

安同 OS 可通过系统更新直接获取 oma 1.18 更新。

Debian、Ubuntu 及衍生版，Linux Mint、deepin 及 openKylin 用户可通过如下命令获取 oma：

```bash
curl -sSf https://repo.aosc.io/get-oma.sh | sudo sh
```

如果您在使用 oma 的过程中遇到问题或有任何建议，欢迎您来我社[各聊天群组](https://aosc.io/contact/)与我们联系反馈。

新特性
---

### 上树探路：软件包依赖树分析器

继 oma 1.17 引入软件包磁盘占用分析器后，oma 1.18 针对用户希望分析系统存储占用、查看软件包安装情况的需求，新增了依赖树分析器功能。依赖树分析器使用十分简单，输入如下命令：

- **`oma tree [软件包]`** - 查阅某个软件包的依赖树
- **`oma why [软件包]`** - 查阅某个软件包的反向依赖（即“为什么这个软件包安装在了我的电脑上？”）

![](/assets/news/oma-1.18-why.webp)

oma 会如上图一样，针对您指定的软件包，将依赖关系以树状图的方式呈现出来。

### 查阅功能增强：本地软件包元信息读取支持

为方便用户朋友直接查看本地或第三方软件包的依赖等信息，oma 1.18 引入了本地软件包元信息读取支持。

![](/assets/news/oma-1.18-show-local.webp)

如同先前 `show`（查看基础信息）, `depends`（查看依赖）及 `rdepends`（查看逆向依赖）命令一般，除了可以如 `oma show bash` 一样显示 `bash` 软件包的基础信息外，现在还支持如上图一样在安装前查阅如腾讯 QQ 这样的第三方软件包的基础信息、依赖和逆向依赖，实现“指哪打哪”的功能一致性。

### 少卡一步：无 D-Bus 环境操作体验优化

在 chroot、Docker 等无 D-Bus 环境下使用过 oma 的朋友应该遇到过这样一个小麻烦：oma 会因为无法在这种环境下探测系统运行状态（如是否接入交流电）警告用户，并要求其附加 `--no-check-dbus` 参数或修改配置文件才能继续操作。

然而，一两次还好，（尤其是在 chroot 环境修复系统的时候）多了血压就高了对吧？这可不行。于是乎，oma 1.18 对这一警告进行了修改并引入了是/否询问：

![](/assets/news/oma-1.18-dbus-prompt.webp)

这样一来，有急事 chroot 的时候，相信您也能稍微少点烦恼了。

问题修复
---

oma 1.18 除了特性及功能修改外，还修复了数个界面和使用问题。

### 强迫症狂喜：下载进度条对齐修正

说来 oma 有个老毛病：在软件包或版本号名较长的时候，进度条可能无法正确对齐，这让强迫症患者们很是苦恼。oma 1.18 通过重构这一部分界面的绘制和布局计算逻辑，彻底修复了这一问题：

![](/assets/news/oma-1.18-alignment.webp)

看，这多整齐啊——

### 提权提示修复

先前版本的 oma 未正确设置其可执行文件的路径，导致图形化提权无法正确显示提权原因。oma 1.18 已修正这一问题：

![](/assets/news/oma-1.18-polkit.webp)

### 其他问题修复

- 修复 `command-not-found`（未知命令提示）功能错误列出模拟运行时环境（如 EmuKit）中的可执行文件的问题，提示信息更可靠
- 修复使用 `--dry-run`（试运行）模式执行 oma 管理操作时，oma 仍执行 dpkg 状态修复流程的问题
- 修复 `oma provides`（软件包文件反查）无法正确补全系统文件路径的问题