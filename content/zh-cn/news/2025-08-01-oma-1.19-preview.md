---
categories:
  - advisories
title: "小熊猫包管理 (oma) v1.19 测试公告"
date: 2025-08-01T18:00:00+08:00
important: false
home: false
---

![119 吗？请呼小熊猫消防站！](/assets/news/oma-1.19.webp)
> 119 吗？请呼小熊猫消防站！

小熊猫包管理 (oma) 进入维护模式了—— 才怪，v1.19 来啦！

略加思考后，oma 能做的还很多：本版更新，我们根据 AOSCC 前后的用户反馈对 oma 的审阅界面进行了翻修，修复了数个特定环境下的功能性问题，并增强了 oma 对系统环境监测的可定制性。

让我们来一起详细了解本版 oma 的新特性和修复吧～

## 测试指南

安同 OS 可通过如下命令获取 oma 1.19 测试版更新：

```bash 
oma topics --opt-in oma-1.19.0-rc.3
```

Debian、Ubuntu 及衍生版，Linux Mint、deepin 及 openKylin 用户可通过如下命令获取 oma（目前暂未区分测试源及稳定源，可直接获取 1.19 版更新）：

```bash 
curl -sSf https://repo.aosc.io/get-oma.sh | sudo sh
```

如果您在测试 oma 的过程中遇到问题或有任何建议，欢迎您来我社[各聊天群组](https://aosc.io/contact)与我们联系反馈。

## 新特性

### 更清晰：重要更新显示样式优化

oma 1.13 引入基于[更新主题元数据](https://wiki.aosc.io/zh/developer/packaging/topic-update-manifest/)实现重要更新时，复用了确认界面中的表格样式，但这一样式实际上并不能清晰地呈现较长的文字说明（尤其是重要更新的具体内容说明）；在较窄的屏幕上，中英分词导致过早换行更是让阅读的体验变得更加尴尬：

![oma 1.18 的重要更新展示方式](/assets/news/oma-1.19-old-tum.webp)
> oma 1.18 的重要更新展示方式

为解决这一问题，oma 1.19 改用了类似 Markdown 文档的分行布局，内容呈现显著更清晰：

![Screenshot_20250801_152719](/assets/news/oma-1.19-new-tum.webp)
> oma 1.19 的重要更新展示方式

### 更可见：审阅界面内容整合

根据用户反馈的“确认界面只在最底部显示下载大小和磁盘空间需求”，若确认界面较长则难以看到关键信息的问题，oma 1.19 对审阅界面的内容布局进行了重构：将原先在最底部的操作指引改为浮动窗口，并将下载大小、预计磁盘空间占用变化两条信息放到了这一浮动窗口中；而后，删去了确认界面中冗余的操作指引和大小变化信息，让主阅读界面内容更为简练。

![Screenshot_20250801_152921](/assets/news/oma-1.19-tui-review.webp)
> oma 1.19 整合了审阅界面中的关键信息展示

此外，操作指引也得到了简化，确保在 80 列宽终端上可以完整显示。

### 更可控：自定义电源及会话状态监测/警告

作为防呆设计的一部分，oma 会在笔记本用户使用电池供电的情况下发出警告，建议用户留意电量消耗和意外断电可能造成的后果，并要求其二次确认。

但是，这一设计在一部分用户看来有些啰嗦，尤其是工作期间长期无法接入交流电源的情况下，每次操作 oma 进行系统软件包更改时，都会被 oma “叮咛”一句。基于这点反馈，oma 1.19 引入了对这一行为的细化设置，允许用户根据不同的使用场景的需要调整电源和会话状态的监控行为：开启完整警告/监测，禁用监控但输出警告，禁用监控且保持静默。

![Screenshot_20250801_153228](/assets/news/oma-1.19-wake-lock-warning.webp)
> 禁用会话监测但保持警告时，oma 输出的警告

此外，我们还为 oma 各命令新增了 `--no-check-battery` 及 `--no-take-wake-lock` 参数，可分别禁用电源及会话状态监测功能。

### 其他特性

oma 1.19 还引入了一个小功能：使用 oma 或 apt-mark 命令标注为“版本锁定 (hold)”的软件包，在使用 `oma list` 时会额外显示 `held` 标记，也可以使用 `--hold` 参数筛选出被锁定版本的软件包。

## 问题修复

oma 1.19 除了特性及功能修改外，还修复了数个功能性问题：

- 修复在 `$LANG` 未设置或为空的情况下，oma 在删除带有 `X-AOSC-Features`（关键系统特性）标记的软件包时会崩溃的问题
- 修复在远程图形访问时（如 SSH X11 Forwarding 及 VNC），polkit 鉴权无法使用的问题